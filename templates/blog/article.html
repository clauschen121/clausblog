{% extends 'base.html' %}

{% block main %}
    <div class="am-u-md-8 am-u-sm-12">
      <article class="am-article blog-article-p">
        <div class="am-article-hd">
          <h1 class="am-article-title blog-text-center">{{ article.title }}</h1>
          <p class="am-article-meta blog-text-center">
              <span><a href="{% url 'blog:category' article.category_id %}" class="blog-color">{{ article.category }}</a></span>-
              <span><a href="#">{{ article.author }}</a></span>-
              <span><a href="#">{{ article.created_time }}</a></span>
              <span>阅读量：{{ article.views }}</span>
              <span>评论量：{{ article.comment_set.count }}</span>

          </p>
        </div>        
        <div class="am-article-bd">
        <img src="{{ article.image.img.url }}" alt="{{ article.image.img.name }}" class="blog-entry-img blog-article-margin">          
        {{ article.body|safe }}
        </div>
      </article>
        
        <div class="am-g blog-article-widget blog-article-margin">
          <div class="am-u-lg-4 am-u-md-5 am-u-sm-7 am-u-sm-centered blog-text-center">
            <span class="am-icon-tags"> &nbsp;</span>标签<br/>
            {% for tag in article.tags.all %}
            <a href="#">{{ tag.name }}</a>&nbsp;&nbsp;
            {% endfor %}
            <hr>
            <a href=""><span class="am-icon-qq am-icon-fw am-primary blog-icon"></span></a>
            <a href=""><span class="am-icon-wechat am-icon-fw blog-icon"></span></a>
            <a href=""><span class="am-icon-weibo am-icon-fw blog-icon"></span></a>
          </div>
        </div>

        <hr>
        <div class="am-g blog-author blog-article-margin">
          <div class="am-u-sm-3 am-u-md-3 am-u-lg-2">
            <img src="assets/i/f15.jpg" alt="" class="blog-author-img am-circle">
          </div>
          <div class="am-u-sm-9 am-u-md-9 am-u-lg-10">
          <h3><span>作者 &nbsp;: &nbsp;</span><span class="blog-color">amazeui</span></h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
          </div>
        </div>
        <hr>
        <!-- {% if is_paginated %}
        <ul class="am-pagination blog-article-margin">
          <li class="am-pagination-prev">
          {% if first %}
            <a href="?page=1">1</a>
          {% endif %}
          {% if left %}
            {% if left_has_more %}
              <span>...</span>
            {% endif %}
            {% for i in left %}
              <a href="?page={{ i }}">{{ i }}</a>
            {% endfor %}
          {% endif %}
          <a href="?page={{ page_obj.number }}">{{ page_obj.number }}</a>
          {% if right %}
            {% for i in right %}
              <a href="?page={{ i }}">{{ i }}</a>
            {% endfor %}
            {% if right_has_more %}
              <span>...</span>
            {% endif %}
          {% endif %}
          {% if last %}
            <a href="?page={{ paginator.num_pages }}">{{ paginator.num_pages }}</a>
          {% endif %}

          </li>
          <li class="am-pagination-next"><a href="">不远的未来 &raquo;</a></li>
        </ul>

        
        <hr>
        {% endif %} -->
        <ul class="am-pagination blog-article-margin">
          <li class="am-pagination-prev">
            {% if pre_article %}
            <a href="{% url 'blog:article' pre_article.pk %}">&laquo; {{ pre_article.title }}</a>
            {% else %}
            &laquo; 暂无上一篇文章
            {% endif %}
          </li>
          <li class="am-pagination-next">
            {% if next_article %}
            <a href="{% url 'blog:article' next_article.pk %}">{{ next_article.title }} &raquo;</a>
            {% else %}
            暂无下一篇文章 &raquo;
            {% endif %}
          </li>
        </ul>

        <form action="{% url 'comments:article_comment' article.pk %}" class="am-form am-g" method="post">
          {% csrf_token %}
            <h3 class="blog-comment">评论</h3>
          <fieldset>
            <div class="am-form-group am-u-sm-4 blog-clear-left">
              {{ form.name }}
              {{ form.name.errors }}
            </div>
            <div class="am-form-group am-u-sm-4">
              {{ form.email }}
              {{ form.email.errors }}
            </div>

            <div class="am-form-group am-u-sm-4 blog-clear-right">
              {{ form.url }}
              {{ form.url.errors }}
            </div>
        
            <div class="am-form-group">
              {{ form.text }}
              {{ form.text.errors }}
            </div>
        
            <p><button type="submit" class="am-btn am-btn-default">发表评论</button></p>
          </fieldset>
        </form>

        <hr>
        <ul>
          {% for comment in comment_list  %}
          <li>
            <span>{{ comment.name }}</span>
            <time> {{ comment.created_time }} </time>
            <div>
              {{ comment.text }}
            </div>
            
          </li>
          {% empty %}
          暂无评论
          {% endfor %}
        </ul>

    </div>


{% endblock main %}


